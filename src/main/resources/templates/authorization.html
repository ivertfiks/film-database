<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AniStream - Авторизация</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Навигация -->
    <nav class="navbar">
        <div class="nav-logo" data-aos="fade-right">
            <span>AniStream</span>
        </div>
        <div class="nav-links" data-aos="fade-left">
            <a th:href="@{'/'}">Home</a>
            <a th:href="@{'/movie-list'}">Anime</a>
            <a th:href="@{'/movie-list'}">Movies</a>
            <a th:href="@{'/movie-list'}">Popular</a>
            <a th:href="@{'/movie-list'}">My List</a>
        </div>
        <div class="nav-buttons">
            <button class="search-btn"><i class="fas fa-search"></i></button>
            <a th:href="@{/user/register}" class="login-btn">Login</a>
        </div>
    </nav>

    <!-- Фоновое видео -->
    <div class="hero">
        <video class="hero-video" autoplay loop muted playsinline>
            <source src="https://rr2---sn-aigl6nz7.googlevideo.com/videoplayback?expire=1733089253&ei=hYNMZ6uJIvGDjuMPicaT6Qg&ip=180.247.45.68&id=o-ADM2X_YJK5rPcW6rZVL-uBMELbsD4gTxl4-GOQvCBlIL&itag=313&aitags=133%2C134%2C135%2C136%2C137%2C160%2C242%2C243%2C244%2C247%2C248%2C271%2C278%2C313%2C394%2C395%2C396%2C397%2C398%2C399%2C400%2C401%2C597%2C598&source=youtube&requiressl=yes&xpc=EgVo2aDSNQ%3D%3D&bui=AQn3pFT-NcRYY8ZJXEF_D2hm1Me5mWJb_Rm8WV3jjJMOV41a9u8z9Pq5zn7F-qOjX6Rk3Q6n-D3pbjDU&spc=qtApAbTs9xLeoPjnmLj9TB-f1lNoU2BLxQhAE2lJiVcn0T-IR-YWfP3CUecb&vprv=1&svpuc=1&mime=video%2Fwebm&ns=nFo-52R64ECTzIh7-w3fTO4Q&rqh=1&gir=yes&clen=325135140&dur=246.913&lmt=1664342127803801&keepalive=yes&fexp=24350590,24350655,24350675,24350705,24350737,51326932,51331020,51335594&c=MWEB&sefc=1&txp=5532434&n=rIpzuqwjTKuvag&sparams=expire%2Cei%2Cip%2Cid%2Caitags%2Csource%2Crequiressl%2Cxpc%2Cbui%2Cspc%2Cvprv%2Csvpuc%2Cmime%2Cns%2Crqh%2Cgir%2Cclen%2Cdur%2Clmt&sig=AJfQdSswRAIgEkQ7VbeLnaEkNfPa2cbHIr1BmqDDBwyYXdaxJSJD9mUCIDweMWciscs2GVuZtgZ01uBSbRs_kxKd1oBkTya_O6OY&rm=sn-2uuxa3vh-02bz7r,sn-npodl7z&rrc=79,104&req_id=a888a75aee07a3ee&rms=rdu,au&redirect_counter=2&cms_redirect=yes&cmsv=e&ipbypass=yes&met=1733067663,&mh=Ks&mip=46.205.205.184&mm=29&mn=sn-aigl6nz7&ms=rdu&mt=1733066028&mv=D&mvi=2&pl=0&lsparams=ipbypass,met,mh,mip,mm,mn,ms,mv,mvi,pl,rms&lsig=AGluJ3MwRgIhAOnjlApbyuVPM6llMbpLjso9tjKkzDJvQ39paogGa6gEAiEAomTJXbCmsT4Zh3xmSlmIgwB9vwVDh92_0uF3zn5l-8I%3D" type="video/mp4">
        </video>
        <div class="hero-overlay"></div>
    </div>

    <!-- Форма авторизации/регистрации -->
    <main class="auth-container">
        <div class="auth-form" data-aos="fade-up">
            <!-- Сообщение об ошибке или успехе -->
            <div th:if="${message}" class="message-box" th:classappend="${message.contains('successful') ? 'success' : 'error'}">
                <i th:class="${message.contains('successful') ? 'fas fa-check-circle' : 'fas fa-exclamation-circle'}"></i>
                <span th:text="${message}"></span>
            </div>

            <div class="auth-tabs">
                <button class="tab-btn active" data-form="login">Вход</button>
                <button class="tab-btn" data-form="register">Регистрация</button>
            </div>

            <!-- Форма входа -->
            <form id="loginForm" th:action="@{/user/login}" method="post" class="form">
                <div class="form-group">
                    <label><i class="fas fa-envelope"></i> Email</label>
                    <input type="email" name="email" required>
                </div>
                <div class="form-group">
                    <label><i class="fas fa-lock"></i> Пароль</label>
                    <input type="password" name="password" required>
                </div>
                <button type="submit" class="auth-btn">
                    <i class="fas fa-sign-in-alt"></i> Войти
                </button>
            </form>

            <!-- Форма регистрации -->
            <form id="registerForm" th:action="@{/user/register}" method="post" class="form" style="display: none;">
                <div class="form-group">
                    <label><i class="fas fa-user"></i> Имя пользователя</label>
                    <input type="text" name="username" required>
                </div>
                <div class="form-group">
                    <label><i class="fas fa-envelope"></i> Email</label>
                    <input type="email" name="email" required>
                </div>
                <div class="form-group">
                    <label><i class="fas fa-lock"></i> Пароль</label>
                    <input type="password" name="password" required>
                </div>
                <div class="form-group">
                    <label><i class="fas fa-lock"></i> Подтвердите пароль</label>
                    <input type="password" name="confirmPassword" required>
                </div>
                <button type="submit" class="auth-btn">
                    <i class="fas fa-user-plus"></i> Зарегистрироваться
                </button>
            </form>
        </div>
    </main>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init({
            duration: 1000,
            once: true
        });

        // Переключение между формами
        document.querySelectorAll('.tab-btn').forEach(button => {
            button.addEventListener('click', () => {
                // Убираем активный класс у всех кнопок
                document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
                // Добавляем активный класс нажатой кнопке
                button.classList.add('active');
                
                // Скрываем все формы
                document.querySelectorAll('.form').forEach(form => form.style.display = 'none');
                // Показываем нужную форму
                const formId = button.dataset.form + 'Form';
                document.getElementById(formId).style.display = 'block';
            });
        });
    </script>
</body>
</html>
